[gd_scene load_steps=2 format=3 uid="uid://b71gf0gg41jl4"]

[sub_resource type="GDScript" id="GDScript_o8fh7"]
script/source = "extends Control
class_name HoldButton

const TIMER_SEC: float = 1.5

@onready var button: Button = $Button
@onready var progress_bar: ProgressBar = $ProgressBar
@onready var interact_timer: Timer = $InteractTimer


func _ready() -> void:
	set_process(false)


func _process(_delta: float) -> void:
	progress_bar.value = TIMER_SEC / interact_timer.time_left * 100


func press() -> void:
	set_process(true)
	interact_timer.start(TIMER_SEC)
	button.button_pressed = true


func cancel() -> void:
	set_process(false)
	interact_timer.stop()
	button.button_pressed = false
	progress_bar.value = 0


func _on_timeout() -> void:
	button.pressed.emit()
"

[node name="HoldButton" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = SubResource("GDScript_o8fh7")

[node name="ProgressBar" type="ProgressBar" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
value = 50.0
show_percentage = false

[node name="Button" type="Button" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "Hold to press"

[node name="InteractTimer" type="Timer" parent="."]
one_shot = true

[connection signal="timeout" from="InteractTimer" to="." method="_on_timeout"]
